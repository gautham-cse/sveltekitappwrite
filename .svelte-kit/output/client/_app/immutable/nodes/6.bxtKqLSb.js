import{s as K,n as O,o as N}from"../chunks/scheduler.DLmczG9q.js";import{S as G,i as J,s as x,e as c,n as Q,f as d,b as k,c as f,a as y,g as L,h as b,j as C,k as P,l,o as q,t as W,d as X}from"../chunks/index.D1jLZ_gR.js";/* empty css                    */import{u as R}from"../chunks/user.B1VH8etP.js";import{g as Y}from"../chunks/entry.CD2cri4e.js";function Z(u){let e,t,a,n,s="Close",i,_;return{c(){e=c("div"),t=c("div"),a=W(`Please fill all the fields to continue\r
                    `),n=c("button"),n.textContent=s,this.h()},l(v){e=f(v,"DIV",{class:!0});var o=y(e);t=f(o,"DIV",{class:!0});var h=y(t);a=X(h,`Please fill all the fields to continue\r
                    `),n=f(h,"BUTTON",{"data-svelte-h":!0}),L(n)!=="svelte-1f187om"&&(n.textContent=s),h.forEach(d),o.forEach(d),this.h()},h(){b(t,"class","dialog"),b(e,"class","dialog-overlay")},m(v,o){P(v,e,o),l(e,t),l(t,a),l(t,n),i||(_=q(n,"click",u[2]),i=!0)},p:O,d(v){v&&d(e),i=!1,_()}}}function $(u){let e,t,a,n,s,i,_='<h2 class="a-3--x">Secure Messenger +</h2> <p class="a-3--y">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</p>',v,o,h,p,M='<div class="a-3--z"><input placeholder="Username" type="text" class="app-input--username" draggable="false" id="app-name" name="name" autocomplete="off" spellcheck="false"/></div> <div class="a-3--z"><input placeholder="Email address" type="email" class="app-input--email" draggable="false" id="app-uemail" name="email" autocomplete="off" spellcheck="false"/></div> <div class="a-3--z"><input placeholder="Enter Password" type="password" name="password" class="app-input--password"/></div> <div class="a-3--alpha"><div class="a-3-al--left"><a href="/">Have account? Login</a></div><div class="a-3-al-right"></div></div> <button class="a-3--submitBtn" type="submit">Continue</button>',z,g,S='<p class="app-ftrnt"></p>',T,I,H,D,U,j,r=u[0]&&Z(u);return{c(){e=x(),t=c("div"),a=c("div"),n=c("div"),s=c("div"),i=c("div"),i.innerHTML=_,v=x(),o=c("div"),h=x(),p=c("form"),p.innerHTML=M,z=x(),g=c("div"),g.innerHTML=S,T=x(),I=c("div"),H=x(),D=c("div"),r&&r.c(),this.h()},l(m){Q("svelte-vfkzw0",document.head).forEach(d),e=k(m),t=f(m,"DIV",{class:!0});var A=y(t);a=f(A,"DIV",{class:!0});var E=y(a);n=f(E,"DIV",{class:!0});var B=y(n);s=f(B,"DIV",{});var w=y(s);i=f(w,"DIV",{"data-svelte-h":!0}),L(i)!=="svelte-1wxxvn8"&&(i.innerHTML=_),v=k(w),o=f(w,"DIV",{class:!0,style:!0}),y(o).forEach(d),h=k(w),p=f(w,"FORM",{"data-svelte-h":!0}),L(p)!=="svelte-4k7pce"&&(p.innerHTML=M),z=k(w),g=f(w,"DIV",{style:!0,"data-svelte-h":!0}),L(g)!=="svelte-883ser"&&(g.innerHTML=S),w.forEach(d),B.forEach(d),T=k(E),I=f(E,"DIV",{class:!0}),y(I).forEach(d),H=k(E),D=f(E,"DIV",{class:!0});var F=y(D);r&&r.l(F),F.forEach(d),E.forEach(d),A.forEach(d),this.h()},h(){document.title="Secure Messenger +",b(o,"class","a-google__auth"),C(o,"margin-bottom","20px"),C(g,"display","flex"),C(g,"justify-content","center"),C(g,"margin-top","-10px"),b(n,"class","a-2--x"),b(I,"class","a-2--y"),b(D,"class","a-4"),b(a,"class","a-1 0-x"),b(t,"class","a-0")},m(m,V){P(m,e,V),P(m,t,V),l(t,a),l(a,n),l(n,s),l(s,i),l(s,v),l(s,o),l(s,h),l(s,p),l(s,z),l(s,g),l(a,T),l(a,I),l(a,H),l(a,D),r&&r.m(D,null),U||(j=q(p,"submit",u[1]),U=!0)},p(m,[V]){m[0]?r?r.p(m,V):(r=Z(m),r.c(),r.m(D,null)):r&&(r.d(1),r=null)},i:O,o:O,d(m){m&&(d(e),d(t)),r&&r.d(),U=!1,j()}}}function ee(u){let e=u.replace(/\s+/g,"_");return e=e.replace(/[^a-zA-Z0-9_]/g,""),e}function te(u){return u.length<6?"Username must be at least 6 characters long":u.match(/[^a-zA-Z0-9_]/)?"Username contains invalid characters":""}function ae(u,e,t){let a=!1;const n=async i=>{i.preventDefault();const _=i.target,v=Object.fromEntries(new FormData(_).entries());let{email:o,password:h,name:p}=v;if(p=ee(p),!o||!h||!p){t(0,a=!0);return}try{await R.register(o,h,p),await R.logout(),Y("/")}catch(M){console.error("Registration error: ",M),t(0,a=!0)}};function s(){t(0,a=!1)}return N(()=>{function i(_){_.key==="Escape"&&s()}return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}}),te(name),[a,n,s]}class oe extends G{constructor(e){super(),J(this,e,ae,$,K,{})}}export{oe as component};
